[TOC]



# Tree



## 二叉树



### 搜索树



#### Red Black Tree

##### Insert

**插入一个红节点可能被破坏的红黑性质分析**

-只有第4条被破坏



红黑性质被破坏后我们要如何修复？

1. 改变节点颜色
   1. 
2. 改变树的结构，节点的结构
   - 左旋
   - 右旋



`**新结点定义为z**`

```
左旋：
	当y是x的右结点时得可用旋转操作，x(父)结点变为y(右子)结点的左结点即为左旋，因为旋转需要保持树的平衡，所以y结点的左子树不变，而右结点变为x的右结点；x的右子树不变，左结点变为y的左结点，以此保证树的平衡。
右旋
	同理
```







旋转

1. 我是叶子结点，没有子结点，无法完成旋转，需要向上查找可以做旋转操作的结点；
   1.	父结点：将会面临几种情况：
   2.	父结点是根结点；
   3.	父结点没有其他子结点

2. 父子两结点都是红色再如何旋转都无法改变第4条性质被破坏的情况,因此我们需要从爷结点开始考虑旋转

   1. 爷节点

      如果以爷结点微旋转点，我们需要做些什么，来让树保持红黑性质？

      1. 分析爷节点下的子树的红黑情况：
         1. 因为整颗树在未加入新结点前是平衡的，是满足所有红黑性质的，所以当父结点为红色的情况下，爷结点一定为黑色，叔节点可能为红色或黑色，所以需要考虑叔节点的颜色情况
            1. 红色：与父节点相同，那么我需要考虑改变爷节点的颜色为红色，父节点和叔节点黑色，既可保证这个子树的红黑性质。
            2. 黑色：与爷节点颜色相同。此时我们需要考虑如何改变节点颜色：
               1. 改变爷节点为红色
               2. 父节点改为黑色
               3. 爷节点做旋转操作（为什么需要旋转呢？因为）
         2. 除了叔节点的颜色情况，我们还需要考虑什么呢？

      2. 改变子树的中节点的颜色

      3. 旋转：
         1. 旋转的准备工作：
            1. 确定z(新)节点相对于爷节点的位置
            2. 根据z 节点属于爷节点的左子树或右子树或右旋
            3. 确定叔节点的颜色
               - 当我们需要旋转父节点和爷节点时，需要考虑到叔节点的颜色，两种情况：
                 - 红色：
                 - 黑色：

         ```
         旋转操作中，最重要的4个节点：爷节点、父节点、叔节点、当前节点
         ```

         

   ​          1.爷结点：

   

   ​       			

   ​		 分析爷结点下的子树的红黑性质情况：

   

​         1）因为整颗树在未加入新结点前是平衡的，是满足所有红黑性质的，所以当父结点为红色的情况下，爷结点一定为黑色

​      1）旋转：旋转的准备工作：

1）确认z结点的相对于爷结点的位置；

2）根据新结点属于爷结点的左子树或右子树决定左旋或右旋；

3）我们线不考虑叔结点的情况，























​      